# 第三章  高质量的代码

## 3.1  面试官谈代码质量

- 由于精度原因不能用等号判断两个小数是否相等！
- 正确性，鲁棒性，输入参数的检查，处理错误和异常的方式，命名方式。

## 3.3  代码的完整性

- 通常从功能测试、边界测试、负面测试三方面设计测试用例，以确保代码的完整性。
- 当抛出异常的时候，程序的执行会打乱正常的顺序，对程序的性能有很大的影响。

## 面试题 11

- 由于计算机表示小数时（float，double）都有误差，不能直接用等号（=）来判断连个小数是否相等。若两个小数的差的绝对值很小，比如小于 0.0000001，就可以认为他们相等。

- 用右移运算符代替除以2；用位与运算符代替求余运算符（%）来判断一个数是奇数还是是偶数。位运算的效率要比乘除法以及求余运算的效率高很多。

## 面试题 12

- 表达一个大数，最常用最容易的方法是用字符串或者数组表达大数。
- 全排列问题用递归更容易表达。
- 用char型字符串来表示十进制的数字并没有充分利用内存，有没有更更高效的方式来表示大数？
  - BCD编码？
  - 几个int拼成一个n位数？
- 关于 n 位的整数并且没有限定 n 的取值范围，或者输入任意大小的整数，是需要考虑大数问题的。字符串是一个简单有效的表示大数的方法。

## 面试题 13

- 当删除一个结点时，并不一定要删除这个结点本身，可以先把下一个结点的内容复制出来覆盖被删除结点的内容，再把下一个结点删除。
- 需要全面考虑各种情况，删除的结点位与链表的尾部以及输入的链表只有一个结点的特殊情况。

## 面试题 14

- 解决一系列同类问题的通用方法，将逻辑框架抽象出来，把判断的标准变成一个函数指针。解耦的好处是提高了代码的重用性，为功能扩展提供了便利。

## 3.4 代码的鲁棒性

- 提高代码的鲁棒性的有效途径是进行防御性编程，指预见在什么地方可能会出现问题，并为这些可能出现的问题制定处理方式。

## 面试题 15

- 当用一个指针遍历链表不能解决问题的时候，可以尝试用两个指针来遍历链表。可以让其中一个指针遍历的速度快一些，或者让它先在链表上走若干步。

## 面试题 16 反转链表

- 用递归实现反转链表？（未实现）

## 面试题 18 树的子结构

- 遍历树的相关的代码有大量的指针操作，每一次使用指针的时候，都要问这个地址有没有可能是 NULL，如果是 NULL 该怎么处理。

## 3.5 本章小结

- 规范性
  - 书写清晰
  - 布局清晰
  - 命名合理
- 完整性
  - 完成基本功能
  - 考虑边界条件
  - 做好错误处理
- 鲁棒性
  - 采取防御式编程
  - 处理无效的输入